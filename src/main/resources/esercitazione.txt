Estensione funzionalitÃ : Tipo di ordine & logica prezzo
âœ… Nuovi attributi in Order
Attributo	Tipo	Descrizione
deliveryType	DeliveryType (enum)	Se Ã¨ IN_HOUSE, TAKE_AWAY, o ONLINE
withReservation	boolean	Se il cliente ha prenotato
participants	int	Numero di persone se IN_HOUSE (min 1)

ğŸ“Œ Nuovo Enum: DeliveryType
javaCopiaModificapublic enum DeliveryType {
    IN_HOUSE, TAKE_AWAY, ONLINE
}
ğŸ§  Logica di Business (aggiornata)
ğŸ’¸ Prezzo base = somma dei piatti
Su questo si applicano le seguenti regole (in questâ€™ordine):
ğŸ’» Se ONLINE
Riduzione di 5 â‚¬
Se withReservation = true: -2 â‚¬ extra
Aggiungere commissione fissa di 1.50 â‚¬
ğŸ¥¡ Se TAKE_AWAY
Aggiungere IVA del 22% al totale (dopo eventuali sconti)
ğŸ½ Se IN_HOUSE
Per ogni partecipante, aggiungere 2 â‚¬ di coperto
participants >= 1 obbligatorio
âš ï¸ Vincoli aggiuntivi
Se IN_HOUSE, il campo participants Ã¨ obbligatorio e deve essere â‰¥ 1
Se ONLINE o TAKE_AWAY, participants puÃ² essere null o ignorato
Non si possono ordinare piÃ¹ di 10 piatti
I piatti devono esistere nel database
ğŸ“¥ Aggiornamento DTO - OrderRequestDTO
javaCopiaModificapublic class OrderRequestDTO {
    private List<Long> dishIds;
    private DeliveryType deliveryType;
    private boolean withReservation;
    private Integer participants; // obbligatorio solo per IN_HOUSE}
ğŸ“¤ OrderResponseDTO (aggiornato)
javaCopiaModificapublic class OrderResponseDTO {
    private Long orderId;
    private List<String> dishes;
    private BigDecimal total;
    private LocalDateTime createdAt;
    private DeliveryType deliveryType;
    private boolean withReservation;
    private Integer participants;
}
ğŸ§  Service â€“ esempio di calcolo finale
javaCopiaModificaBigDecimal total = sommaPrezziPiatti;
if (order.getDeliveryType() == ONLINE) {
    total = total.subtract(new BigDecimal("5.00"));
    if (order.isWithReservation()) {
        total = total.subtract(new BigDecimal("2.00"));
    }
    total = total.add(new BigDecimal("1.50")); // commissioni} else if (order.getDeliveryType() == TAKE_AWAY) {
    total = total.multiply(new BigDecimal("1.22")); // + IVA} else if (order.getDeliveryType() == IN_HOUSE) {
    total = total.add(new BigDecimal(order.getParticipants() * 2)); // coperto}
âœ… Aggiorniamo anche la validazione
Se deliveryType == IN_HOUSE e participants == null â†’ 400 Bad Request
Se dishIds.size() > 10 â†’ 400 Bad Request
Se uno o piÃ¹ dishId non esistono â†’ 404 Not Found


-------------

ğŸ§± Struttura concettuale
ğŸ½ Dish Entity
id: Long
name: String
price: BigDecimal
type: DishType (enum)
ğŸ“Œ Relazione: un piatto puÃ² comparire in piÃ¹ ordini.
ğŸ“¦ Order Entity
id: Long
creationDate: LocalDateTime
total: BigDecimal
Relazione: List<OrderDish> (vedi sotto)
ğŸ½ğŸ“¦ OrderDish Entity (join table)
id: Long
order: Order
dish: Dish
ğŸ“Œ Serve per gestire la relazione molti-a-molti tra Order e Dish.



